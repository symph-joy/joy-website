<!DOCTYPE html><html><head><link rel="stylesheet" id="theme-style"/><style id="theme-color"></style><script>
                const theme = localStorage.getItem('theme') || 'light';
                const themeColor = localStorage.getItem('themeColor') || 'volcano';
                const themeUrl = "/static/antd.variable.css";
                const link = document.getElementById('theme-style');
                link.href = themeUrl;
                const style = document.getElementById('theme-color');
                console.log('themeColor: ', themeColor);
                const styles = {"daybreakBlue":"\n  :root {\n    --ant-primary-color: rgb(24, 144, 255);\n    --ant-primary-color-disabled: #bae7ff;\n    --ant-primary-color-hover: #40a9ff;\n    --ant-primary-color-active: #0050b3;\n    --ant-primary-color-outline: rgba(24, 144, 255, 0.2);\n    --ant-primary-color-deprecated-bg: #bae7ff;\n    --ant-primary-color-deprecated-border: #69c0ff;\n    --ant-primary-1: #e6f7ff;\n    --ant-primary-2: #bae7ff;\n    --ant-primary-3: #91d5ff;\n    --ant-primary-4: #69c0ff;\n    --ant-primary-5: #40a9ff;\n    --ant-primary-6: #1890ff;\n    --ant-primary-7: #096dd9;\n    --ant-primary-8: #0050b3;\n    --ant-primary-9: #003a8c;\n    --ant-primary-10: #002766;\n    --ant-primary-color-deprecated-l-35: rgb(202, 230, 255);\n    --ant-primary-color-deprecated-l-20: rgb(126, 193, 255);\n    --ant-primary-color-deprecated-t-20: rgb(70, 166, 255);\n    --ant-primary-color-deprecated-t-50: rgb(140, 200, 255);\n    --ant-primary-color-deprecated-f-12: rgba(24, 144, 255, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(230, 247, 255, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(220, 244, 255);\n  }\n","dustRed":"\n  :root {\n    --ant-primary-color: rgb(245, 34, 45);\n    --ant-primary-color-disabled: #ffccc7;\n    --ant-primary-color-hover: #ff4d4f;\n    --ant-primary-color-active: #a8071a;\n    --ant-primary-color-outline: rgba(245, 34, 45, 0.2);\n    --ant-primary-color-deprecated-bg: #ffccc7;\n    --ant-primary-color-deprecated-border: #ff7875;\n    --ant-primary-1: #fff1f0;\n    --ant-primary-2: #ffccc7;\n    --ant-primary-3: #ffa39e;\n    --ant-primary-4: #ff7875;\n    --ant-primary-5: #ff4d4f;\n    --ant-primary-6: #f5222d;\n    --ant-primary-7: #cf1322;\n    --ant-primary-8: #a8071a;\n    --ant-primary-9: #820014;\n    --ant-primary-10: #5c0011;\n    --ant-primary-color-deprecated-l-35: rgb(253, 205, 207);\n    --ant-primary-color-deprecated-l-20: rgb(249, 132, 138);\n    --ant-primary-color-deprecated-t-20: rgb(247, 78, 87);\n    --ant-primary-color-deprecated-t-50: rgb(250, 145, 150);\n    --ant-primary-color-deprecated-f-12: rgba(245, 34, 45, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(255, 241, 240, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(255, 231, 230);\n  }\n","volcano":"\n  :root {\n    --ant-primary-color: rgb(250, 84, 28);\n    --ant-primary-color-disabled: #ffd8bf;\n    --ant-primary-color-hover: #ff7a45;\n    --ant-primary-color-active: #ad2102;\n    --ant-primary-color-outline: rgba(250, 84, 28, 0.2);\n    --ant-primary-color-deprecated-bg: #ffd8bf;\n    --ant-primary-color-deprecated-border: #ff9c6e;\n    --ant-primary-1: #fff2e8;\n    --ant-primary-2: #ffd8bf;\n    --ant-primary-3: #ffbb96;\n    --ant-primary-4: #ff9c6e;\n    --ant-primary-5: #ff7a45;\n    --ant-primary-6: #fa541c;\n    --ant-primary-7: #d4380d;\n    --ant-primary-8: #ad2102;\n    --ant-primary-9: #871400;\n    --ant-primary-10: #610b00;\n    --ant-primary-color-deprecated-l-35: rgb(254, 216, 203);\n    --ant-primary-color-deprecated-l-20: rgb(252, 159, 128);\n    --ant-primary-color-deprecated-t-20: rgb(251, 118, 73);\n    --ant-primary-color-deprecated-t-50: rgb(253, 170, 142);\n    --ant-primary-color-deprecated-f-12: rgba(250, 84, 28, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(255, 242, 232, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(255, 236, 222);\n  }\n","sunsetOrange":"\n  :root {\n    --ant-primary-color: rgb(250, 173, 20);\n    --ant-primary-color-disabled: #fff1b8;\n    --ant-primary-color-hover: #ffc53d;\n    --ant-primary-color-active: #ad6800;\n    --ant-primary-color-outline: rgba(250, 173, 20, 0.2);\n    --ant-primary-color-deprecated-bg: #fff1b8;\n    --ant-primary-color-deprecated-border: #ffd666;\n    --ant-primary-1: #fffbe6;\n    --ant-primary-2: #fff1b8;\n    --ant-primary-3: #ffe58f;\n    --ant-primary-4: #ffd666;\n    --ant-primary-5: #ffc53d;\n    --ant-primary-6: #faad14;\n    --ant-primary-7: #d48806;\n    --ant-primary-8: #ad6800;\n    --ant-primary-9: #874d00;\n    --ant-primary-10: #613400;\n    --ant-primary-color-deprecated-l-35: rgb(254, 234, 195);\n    --ant-primary-color-deprecated-l-20: rgb(252, 208, 120);\n    --ant-primary-color-deprecated-t-20: rgb(251, 189, 67);\n    --ant-primary-color-deprecated-t-50: rgb(253, 214, 138);\n    --ant-primary-color-deprecated-f-12: rgba(250, 173, 20, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(255, 251, 230, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(255, 249, 220);\n  }\n","cyan":"\n  :root {\n    --ant-primary-color: rgb(19, 194, 194);\n    --ant-primary-color-disabled: #b5f5ec;\n    --ant-primary-color-hover: #36cfc9;\n    --ant-primary-color-active: #006d75;\n    --ant-primary-color-outline: rgba(19, 194, 194, 0.2);\n    --ant-primary-color-deprecated-bg: #b5f5ec;\n    --ant-primary-color-deprecated-border: #5cdbd3;\n    --ant-primary-1: #e6fffb;\n    --ant-primary-2: #b5f5ec;\n    --ant-primary-3: #87e8de;\n    --ant-primary-4: #5cdbd3;\n    --ant-primary-5: #36cfc9;\n    --ant-primary-6: #13c2c2;\n    --ant-primary-7: #08979c;\n    --ant-primary-8: #006d75;\n    --ant-primary-9: #00474f;\n    --ant-primary-10: #002329;\n    --ant-primary-color-deprecated-l-35: rgb(147, 244, 244);\n    --ant-primary-color-deprecated-l-20: rgb(77, 238, 238);\n    --ant-primary-color-deprecated-t-20: rgb(66, 206, 206);\n    --ant-primary-color-deprecated-t-50: rgb(137, 225, 225);\n    --ant-primary-color-deprecated-f-12: rgba(19, 194, 194, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(230, 255, 251, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(220, 255, 249);\n  }\n","polarGreen":"\n  :root {\n    --ant-primary-color: rgb(82, 196, 26);\n    --ant-primary-color-disabled: #d9f7be;\n    --ant-primary-color-hover: #73d13d;\n    --ant-primary-color-active: #237804;\n    --ant-primary-color-outline: rgba(82, 196, 26, 0.2);\n    --ant-primary-color-deprecated-bg: #d9f7be;\n    --ant-primary-color-deprecated-border: #95de64;\n    --ant-primary-1: #f6ffed;\n    --ant-primary-2: #d9f7be;\n    --ant-primary-3: #b7eb8f;\n    --ant-primary-4: #95de64;\n    --ant-primary-5: #73d13d;\n    --ant-primary-6: #52c41a;\n    --ant-primary-7: #389e0d;\n    --ant-primary-8: #237804;\n    --ant-primary-9: #135200;\n    --ant-primary-10: #092b00;\n    --ant-primary-color-deprecated-l-35: rgb(186, 242, 158);\n    --ant-primary-color-deprecated-l-20: rgb(138, 233, 91);\n    --ant-primary-color-deprecated-t-20: rgb(117, 208, 72);\n    --ant-primary-color-deprecated-t-50: rgb(169, 226, 141);\n    --ant-primary-color-deprecated-f-12: rgba(82, 196, 26, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(246, 255, 237, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(241, 255, 227);\n  }\n","geekBlue":"\n  :root {\n    --ant-primary-color: rgb(47, 84, 235);\n    --ant-primary-color-disabled: #d6e4ff;\n    --ant-primary-color-hover: #597ef7;\n    --ant-primary-color-active: #10239e;\n    --ant-primary-color-outline: rgba(47, 84, 235, 0.2);\n    --ant-primary-color-deprecated-bg: #d6e4ff;\n    --ant-primary-color-deprecated-border: #85a5ff;\n    --ant-primary-1: #f0f5ff;\n    --ant-primary-2: #d6e4ff;\n    --ant-primary-3: #adc6ff;\n    --ant-primary-4: #85a5ff;\n    --ant-primary-5: #597ef7;\n    --ant-primary-6: #2f54eb;\n    --ant-primary-7: #1d39c4;\n    --ant-primary-8: #10239e;\n    --ant-primary-9: #061178;\n    --ant-primary-10: #030852;\n    --ant-primary-color-deprecated-l-35: rgb(210, 218, 251);\n    --ant-primary-color-deprecated-l-20: rgb(140, 160, 244);\n    --ant-primary-color-deprecated-t-20: rgb(89, 118, 239);\n    --ant-primary-color-deprecated-t-50: rgb(151, 170, 245);\n    --ant-primary-color-deprecated-f-12: rgba(47, 84, 235, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(240, 245, 255, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(230, 238, 255);\n  }\n","goldenPurple":"\n  :root {\n    --ant-primary-color: rgb(114, 46, 209);\n    --ant-primary-color-disabled: #efdbff;\n    --ant-primary-color-hover: #9254de;\n    --ant-primary-color-active: #391085;\n    --ant-primary-color-outline: rgba(114, 46, 209, 0.2);\n    --ant-primary-color-deprecated-bg: #efdbff;\n    --ant-primary-color-deprecated-border: #b37feb;\n    --ant-primary-1: #f9f0ff;\n    --ant-primary-2: #efdbff;\n    --ant-primary-3: #d3adf7;\n    --ant-primary-4: #b37feb;\n    --ant-primary-5: #9254de;\n    --ant-primary-6: #722ed1;\n    --ant-primary-7: #531dab;\n    --ant-primary-8: #391085;\n    --ant-primary-9: #22075e;\n    --ant-primary-10: #120338;\n    --ant-primary-color-deprecated-l-35: rgb(213, 192, 241);\n    --ant-primary-color-deprecated-l-20: rgb(170, 130, 227);\n    --ant-primary-color-deprecated-t-20: rgb(142, 88, 218);\n    --ant-primary-color-deprecated-t-50: rgb(185, 151, 232);\n    --ant-primary-color-deprecated-f-12: rgba(114, 46, 209, 0.12);\n    --ant-primary-color-active-deprecated-f-30: rgba(249, 240, 255, 0.3);\n    --ant-primary-color-active-deprecated-d-02: rgb(245, 230, 255);\n  }\n"};
                const styleColors = {"daybreakBlue":"rgb(24, 144, 255)","dustRed":"rgb(245, 34, 45)","volcano":"rgb(250, 84, 28)","sunsetOrange":"rgb(250, 173, 20)","cyan":"rgb(19, 194, 194)","polarGreen":"rgb(82, 196, 26)","geekBlue":"rgb(24, 144, 255)","goldenPurple":"rgb(114, 46, 209)"};
                style.innerHTML = styles[themeColor];
                document.documentElement.style.setProperty('--theme-color', styleColors[themeColor]);
              </script><script src="https://cdn.bootcdn.net/ajax/libs/three.js/r122/three.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js"></script><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="joy-head-count" content="2"/><link rel="icon" href="data:image/ico;base64,aWNv"/><link rel="preload" href="/_joy/static/css/0e72cdd32507b682ae6f.css" as="style"/><link rel="stylesheet" href="/_joy/static/css/0e72cdd32507b682ae6f.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_joy/static/chunks/main-c52aa145e4e3f5b00c79.js" as="script"/><link rel="preload" href="/_joy/static/chunks/webpack-373fdeea3ec48be3183e.js" as="script"/><link rel="preload" href="/_joy/static/chunks/framework-089ded57a3f0791a1b9d.js" as="script"/><link rel="preload" href="/_joy/static/chunks/commons-ce221d408e33857f830a.js" as="script"/><link rel="preload" href="/_joy/static/chunks/pages/_app-b94e456d88e8b012cf8e.js" as="script"/></head><body><div id="__joy"><section class="ant-layout"><header class="layout_header__1OM0M"><nav id="nav" class="layout_nav__K3mbB"><div id="nav-inner" class="layout_nav__inner__2uMRU"><a id="logo" class="layout_logo__FKYzP" href="/">Symph Joy</a><button id="collapseBtn" type="button" class="ant-btn ant-btn-text ant-btn-lg layout_menu__collapseBtn__FF_4T"><span role="img" aria-label="menu-unfold" class="anticon anticon-menu-unfold"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu-unfold" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"></path></svg></span></button><ul class="ant-menu-overflow ant-menu ant-menu-root ant-menu-horizontal ant-menu-light layout_menu__2a0TM layout_menu__collapsed__cIvBb" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:0" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><div class="ant-select ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-customize-input ant-select-show-search"><div class="ant-select-selector"><span class="ant-select-selection-search"><span class="ant-input-affix-wrapper ant-select-selection-search-input"><span class="ant-input-prefix"><span role="img" aria-label="search" class="anticon anticon-search"><svg viewBox="64 64 896 896" focusable="false" data-icon="search" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg></span></span><input type="search" autoComplete="off" placeholder="搜索" class="ant-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span></span><span class="ant-select-selection-placeholder"></span></div></div></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:1" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a href="/joy/start/introduce">Joy</a></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:2" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a href="/react/start/introduce">React</a></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:3" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a href="/server/start/introduce">Server</a></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:4" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a href="/config/introduce">配置</a></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:5" role="menuitem" tabindex="-1"><span class="ant-menu-title-content">指南</span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:6" role="menuitem" tabindex="-1"><span class="ant-menu-title-content">插件</span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:7" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a href="/v1/readme">v1</a></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:8" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a target="_blank" href="https://github.com/lnlfps/symph-joy">Github</a></span></li><li class="ant-menu-overflow-item ant-menu-item ant-menu-item-only-child" style="opacity:1;order:9" role="menuitem" tabindex="-1"><span class="ant-menu-title-content"><a id="change-theme" class="layout_theme__switch__133kS"><span><span role="img" class="anticon"><svg viewBox="0 0 1024 1024" fill="currentColor" width="1em" height="1em"><path d="M512 832a64 64 0 0 1 64 64v64a64 64 0 1 1-128 0v-64a64 64 0 0 1 64-64z m0-640a64 64 0 0 1-64-64V64a64 64 0 1 1 128 0v64a64 64 0 0 1-64 64z m448 256a64 64 0 1 1 0 128h-64a64 64 0 1 1 0-128h64zM192 512a64 64 0 0 1-64 64H64a64 64 0 1 1 0-128h64a64 64 0 0 1 64 64z m636.768 226.272l45.248 45.248a64 64 0 1 1-90.496 90.496l-45.248-45.248a64 64 0 1 1 90.496-90.496zM195.232 285.728L149.984 240.48a64 64 0 1 1 90.496-90.496l45.248 45.248a64 64 0 1 1-90.496 90.496z m633.536 0a64 64 0 1 1-90.496-90.496l45.248-45.248a64 64 0 1 1 90.496 90.496l-45.248 45.248zM195.232 738.272a64 64 0 1 1 90.496 90.496l-45.248 45.248a64 64 0 1 1-90.496-90.496l45.248-45.248zM512 256a256 256 0 1 0 0 512 256 256 0 0 0 0-512z m0 416a160 160 0 1 1 0.032-320.032A160 160 0 0 1 512 672z" p-id="2605"></path></svg></span><span role="img" class="anticon"><svg viewBox="0 0 1024 1024" fill="currentColor" width="1em" height="1em"><path d="M514.56 938.666667h-40.106667a426.666667 426.666667 0 0 1 0-853.333334 42.666667 42.666667 0 0 1 42.666667 21.76A42.666667 42.666667 0 0 1 512 153.173333a256 256 0 0 0 358.4 358.4 42.666667 42.666667 0 0 1 46.08-2.986666 42.666667 42.666667 0 0 1 21.76 42.666666A426.666667 426.666667 0 0 1 514.56 938.666667zM397.226667 189.44a341.333333 341.333333 0 1 0 437.333333 437.333333A341.333333 341.333333 0 0 1 381.013333 356.266667a341.333333 341.333333 0 0 1 16.213334-166.826667z" p-id="3227"></path></svg></span></span></a></span></li><li class="ant-menu-overflow-item ant-menu-overflow-item-rest ant-menu-submenu ant-menu-submenu-horizontal" style="opacity:0;height:0;overflow-y:hidden;order:9007199254740991;pointer-events:none;position:absolute" aria-hidden="true" role="none"><div role="menuitem" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="false" aria-haspopup="true"><span role="img" aria-label="ellipsis" class="anticon anticon-ellipsis"><svg viewBox="64 64 896 896" focusable="false" data-icon="ellipsis" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"></path></svg></span><i class="ant-menu-submenu-arrow"></i></div></li></ul><div style="display:none" aria-hidden="true"></div></div></nav></header><main class="ant-layout-content"><div class="docs_layoutContent__1N8MU"><div><div class=""><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light docs_docMenus__2pe7u" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">介绍</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content">@symph/react</span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content">快速开始</span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">基础使用</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content">React 路由</span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content">ReactController</span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content">ReactModel</span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content">React 组件简介</span></li></ul></li><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">高级使用</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div><div class="docs_menuIcon__3YKAQ"><span role="img" aria-label="menu-unfold" class="anticon anticon-menu-unfold"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu-unfold" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"></path></svg></span></div><div class="docs_right__1ZHMG"><div class="docs_center__23l0Z"><div class="ant-spin-nested-loading"><div class="ant-spin-container"><div>500<!-- -->:<!-- -->服务器错误，请重试。</div></div></div></div><div class="docs_titleTree__2wlEA"><div><div class=""><div class="ant-anchor-wrapper" style="max-height:100vh"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div></div></div></div></div></div></div></div></main></section></div><script id="__JOY_DATA__" type="application/json">{"initState":[{"pathname":"INIT@/react/03-advanced-features","ssgData":[{"type":"__INIT_MODEL","state":{"noop":{},"reactAppInitManager":{},"layoutModel":{"collapsed":true,"isMobile":false},"docsModel":{"loadingCurrentDoc":false,"docMenus":[],"titleTrees":[],"result":[],"openKeys":[],"snippets":{},"defaultOpenKeys":[]}}}]},{"pathname":"/","ssgData":[{"type":"reactAppInitManager/__SET_STATE","state":{"/":{"pathname":"/","index":false,"initStatic":2}}}]},{"pathname":"/react","ssgData":[{"type":"docsModel/__SET_STATE","state":{"docMenus":[{"title":"介绍","path":"/react/01-start","file":"docs/react/01-start","children":[{"title":"@symph/react","path":"/react/start/introduce","file":"docs/react/01-start/01-introduce.md","hasMenu":false,"mdContent":"# @symph/react\n\nReact 应用框架\n\n","htmlContent":"\n                \u003ch1 id=\"symph%2Freact\"\u003e\n                  @symph/react\n                \u003c/h1\u003e\u003cp\u003eReact 应用框架\u003c/p\u003e\n","anchor":[]},{"title":"快速开始","path":"/react/start/quick-started","file":"docs/react/01-start/02-quick-started.md","hasMenu":false,"mdContent":"# 快速开始\n\nJoy 支持 React、Node 或者前后端混合应用开发，这里以一个简单的 React 应用为例，介绍如何快速开始开发。\n\n## 环境准备\n\n- node 建议 12 或以上版本，推荐使用 nvm 来管理 node 版本。\n\n- 推荐使用 yarn 管理依赖，国内使用 [阿里 npm 源](https://npmmirror.com/) registry: https://registry.npm.taobao.org\n\n```shell\n# 安装 yarn\n$ npm i yarn -g\n# 手动设置`registry`地址为国内源\n$ yarn config set registry https://registry.npm.taobao.org\n# 查看源\n$ yarn config get registry\n\n# 或者使用 tyarn\n$ npm i yarn tyarn -g\n# 后面文档里的 yarn 换成 tyarn\n$ tyarn -v\n```\n\n## 创建目录\n\n创建应用根目录\n\n```shell\n$ mkdir myapp \u0026\u0026 cd myapp\n```\n\n创建应用内目录和文件，目录结构如下：\n\n```shell\nmyapp\n  src  # 源代码目录\n    pages  # 约定React路由目录\n      index.tsx  # 第一个页面\n  package.json\n```\n\n- 在 package.json 内声明应用名和依赖：\n\n```json\n{\n  \"name\": \"myapp\",\n  \"version\": \"v1.0.0\",\n  \"scripts\": {\n    \"dev\": \"joy dev\",\n    \"export\": \"joy build\u0026\u0026joy export\"\n  },\n  \"dependencies\": {\n    \"react\": \"^17.0.1\",\n    \"react-dom\": \"^17.0.1\",\n    \"@symph/joy\": \"^2.0.0\"\n  }\n}\n```\n\n- 创建第一个路由页面`index.tsx`, Joy 同时支持 ES6 和 Typescript 语法，如果使用 ES6，创建 JS 文件`index.jsx`，添加页面展现内容:\n\n```tsx\n// src/pages/index.tsx\nimport React from \"react\";\nimport { ReactController, BaseReactController } from \"@symph/react\";\n\n@ReactController()\nexport default class Index extends BaseReactController {\n  renderView() {\n    return \u003cp\u003eHello Joy!\u003c/p\u003e;\n  }\n}\n```\n\n## 安装依赖\n\n```shell\n$ yarn install\n```\n\n## 启动开发服务器\n\n```shell\n$ yarn dev\n```\n\n当命令行输出`ready - started server on http://localhost:3000`时，开发服务器启动成功，打开浏览器输入地址 `http://localhost:3000`，即可看到我们的第一个页面`Hello Joy!`。\n若此时修改页面内容`Hello Joy!`为`Hello MyApp`，然后保存文件，浏览器界面将自动更新为新内容。\n\n## 部署发布\n\n### 构建\n\n```shell\n$ yarn export\n```\n\n构建产物默认生成到 ./out 下，目录结构类似于：\n\n```shell\n./out\n  index.html\n  404.html\n  _joy/ # 包含js、css、json等\n```\n\n### 本地验证\n\n使用`http-server`启动本地静态文件服务器\n\n```shell\n# 安装 http-server\n$ npm i -g http-server\n\n# 启动服务器\n$ http-server ./out\n```\n\n在浏览器上打开地址：[http://127.0.0.1:8080](http://127.0.0.1:8080), 正常情况下应该是和`yarn dev`开发运行时是一致的。\n\n### 部署\n\n本地验证完成后，将`out`目录部署到服务器上即可。\n","htmlContent":"\n                \u003ch1 id=\"%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B\"\u003e\n                  快速开始\n                \u003c/h1\u003e\u003cp\u003eJoy 支持 React、Node 或者前后端混合应用开发，这里以一个简单的 React 应用为例，介绍如何快速开始开发。\u003c/p\u003e\n\n                \u003ch2 id=\"%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87\"\u003e\n                  环境准备\n                \u003c/h2\u003e\u003cul\u003e\n\u003cli\u003e\u003cp\u003enode 建议 12 或以上版本，推荐使用 nvm 来管理 node 版本。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e推荐使用 yarn 管理依赖，国内使用 \u003ca href=\"https://npmmirror.com/\"\u003e阿里 npm 源\u003c/a\u003e registry: \u003ca href=\"https://registry.npm.taobao.org\"\u003ehttps://registry.npm.taobao.org\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e安装 yarn\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003enpm i yarn -g\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e手动设置`registry`地址为国内源\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eyarn config \u003cspan class=\"hljs-built_in\"\u003eset\u003c/span\u003e registry https://registry.npm.taobao.org\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e查看源\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eyarn config get registry\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e\n# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e或者使用 tyarn\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003enpm i yarn tyarn -g\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e后面文档里的 yarn 换成 tyarn\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003etyarn -v\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch2 id=\"%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95\"\u003e\n                  创建目录\n                \u003c/h2\u003e\u003cp\u003e创建应用根目录\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e\u003cspan class=\"hljs-built_in\"\u003emkdir\u003c/span\u003e myapp \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e myapp\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e创建应用内目录和文件，目录结构如下：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003emyapp\n  src  # 源代码目录\n    pages  # 约定React路由目录\n      index.tsx  # 第一个页面\n  package.json\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e在 package.json 内声明应用名和依赖：\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;myapp\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;version\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;v1.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;scripts\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;dev\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;joy dev\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;export\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;joy build\u0026amp;\u0026amp;joy export\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;dependencies\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^17.0.1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;react-dom\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^17.0.1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;@symph/joy\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^2.0.0\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e创建第一个路由页面\u003ccode\u003eindex.tsx\u003c/code\u003e, Joy 同时支持 ES6 和 Typescript 语法，如果使用 ES6，创建 JS 文件\u003ccode\u003eindex.jsx\u003c/code\u003e，添加页面展现内容:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-comment\"\u003e// src/pages/index.tsx\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eReactController\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eBaseReactController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@symph/react\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-meta\"\u003e@ReactController\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIndex\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactController\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003erenderView\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003eHello Joy!\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch2 id=\"%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96\"\u003e\n                  安装依赖\n                \u003c/h2\u003e\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eyarn install\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch2 id=\"%E5%90%AF%E5%8A%A8%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8\"\u003e\n                  启动开发服务器\n                \u003c/h2\u003e\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eyarn dev\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e当命令行输出\u003ccode\u003eready - started server on http://localhost:3000\u003c/code\u003e时，开发服务器启动成功，打开浏览器输入地址 \u003ccode\u003ehttp://localhost:3000\u003c/code\u003e，即可看到我们的第一个页面\u003ccode\u003eHello Joy!\u003c/code\u003e。\n若此时修改页面内容\u003ccode\u003eHello Joy!\u003c/code\u003e为\u003ccode\u003eHello MyApp\u003c/code\u003e，然后保存文件，浏览器界面将自动更新为新内容。\u003c/p\u003e\n\n                \u003ch2 id=\"%E9%83%A8%E7%BD%B2%E5%8F%91%E5%B8%83\"\u003e\n                  部署发布\n                \u003c/h2\u003e\n                \u003ch3 id=\"%E6%9E%84%E5%BB%BA\"\u003e\n                  构建\n                \u003c/h3\u003e\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003eyarn \u003cspan class=\"hljs-built_in\"\u003eexport\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e构建产物默认生成到 ./out 下，目录结构类似于：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e./out\n  index.html\n  404.html\n  _joy/ # 包含js、css、json等\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch3 id=\"%E6%9C%AC%E5%9C%B0%E9%AA%8C%E8%AF%81\"\u003e\n                  本地验证\n                \u003c/h3\u003e\u003cp\u003e使用\u003ccode\u003ehttp-server\u003c/code\u003e启动本地静态文件服务器\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e安装 http-server\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003enpm i -g http-server\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e\n# \u003c/span\u003e\u003cspan class=\"language-bash\"\u003e启动服务器\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$ \u003c/span\u003e\u003cspan class=\"language-bash\"\u003ehttp-server ./out\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e在浏览器上打开地址：\u003ca href=\"http://127.0.0.1:8080\"\u003ehttp://127.0.0.1:8080\u003c/a\u003e, 正常情况下应该是和\u003ccode\u003eyarn dev\u003c/code\u003e开发运行时是一致的。\u003c/p\u003e\n\n                \u003ch3 id=\"%E9%83%A8%E7%BD%B2\"\u003e\n                  部署\n                \u003c/h3\u003e\u003cp\u003e本地验证完成后，将\u003ccode\u003eout\u003c/code\u003e目录部署到服务器上即可。\u003c/p\u003e\n","anchor":[{"type":"heading","raw":"## 环境准备\n\n","depth":2,"text":"环境准备","tokens":[{"type":"text","raw":"环境准备","text":"环境准备"}],"id":"#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"},{"type":"heading","raw":"## 创建目录\n\n","depth":2,"text":"创建目录","tokens":[{"type":"text","raw":"创建目录","text":"创建目录"}],"id":"#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"},{"type":"heading","raw":"## 安装依赖\n\n","depth":2,"text":"安装依赖","tokens":[{"type":"text","raw":"安装依赖","text":"安装依赖"}],"id":"#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"},{"type":"heading","raw":"## 启动开发服务器\n\n","depth":2,"text":"启动开发服务器","tokens":[{"type":"text","raw":"启动开发服务器","text":"启动开发服务器"}],"id":"#%E5%90%AF%E5%8A%A8%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8"},{"type":"heading","raw":"## 部署发布\n\n","depth":2,"text":"部署发布","tokens":[{"type":"text","raw":"部署发布","text":"部署发布"}],"id":"#%E9%83%A8%E7%BD%B2%E5%8F%91%E5%B8%83","children":[{"type":"heading","raw":"### 构建\n\n","depth":3,"text":"构建","tokens":[{"type":"text","raw":"构建","text":"构建"}],"id":"#%E6%9E%84%E5%BB%BA"},{"type":"heading","raw":"### 本地验证\n\n","depth":3,"text":"本地验证","tokens":[{"type":"text","raw":"本地验证","text":"本地验证"}],"id":"#%E6%9C%AC%E5%9C%B0%E9%AA%8C%E8%AF%81"},{"type":"heading","raw":"### 部署\n\n","depth":3,"text":"部署","tokens":[{"type":"text","raw":"部署","text":"部署"}],"id":"#%E9%83%A8%E7%BD%B2"}]}]}]},{"title":"基础使用","path":"/react/02-basic","file":"docs/react/02-basic","children":[{"title":"React 路由","path":"/react/basic/react-router","file":"docs/react/02-basic/04-react-router.md","hasMenu":false,"mdContent":"# React 路由\n\nJoy React 应用是单页面应用(SPA)，单页面应用只在首次加载 HTML 页面框架，而后就由路由模块来切换页面，不同的页面由不同的的组件构成，页面切换也就是切换组件。\n\n\u003e 路由模块底层封装自 [react-router](https://reactrouter.com/)，请跳转到 [react router 官网](https://reactrouter.com/) 了解详细文档。\n\u003e\n\u003e `@symph/react` 兼容 [react-router](https://reactrouter.com/) 的组件和用法，但推荐使用`@symph/react/router-dom`替换`react-router-dom`，前者包含后者，也方便导入使用，也提供额外的附加能力。\n\n`@symph/react`提供多种注册路由的方式：\n\n- 定义路由组件，注册组件到应用容器，应用自动识别和注册路由。\n- 通过`ReactRouterService`服务接口，注册路由信息。\n- 使用[`react-router`](https://reactrouter.com/)的`\u003cRoutes\u003e`和`\u003cRoute\u003e`注册，注册运行时动态路由，动态路由不在`ReactRouterService`服务中注册，所以不能被应用容器控制识别和控制。\n\n## 路由组件\n\n使用`@ReactRoute()`装饰器将`ReactController`组件类申明为路由组件，将路由组件注册到应用容器，当内置的`ReactRouterService`服务识别到路由组件时，将自动解析和注册路由到路由表。\n\n\u003e 在 `@symph/joy` 项目启动时，将自动扫描和注册项目中的所有 ReactRoute 路由， 运行`joy dev`命令，浏览`http://localhost:300/hello` 即可访问到我们的页面。\n\u003e 如果单独使用 `@symph/react`，需要开发者负责注册所有的路由组件。\n\n例如创建`src/client/pages/hello.tsx`文件，定义一个路由组件：\n\n```tsx\n// src/client/pages/hello.tsx\n\nimport React from \"react\";\nimport { ReactController, BaseReactController, ReactRoute } from \"@symph/react\";\n\n@ReactRoute({ path: \"/hello\" })\n@ReactController()\nexport default class HelloController extends BaseReactController {\n  renderView() {\n    return \u003cdiv data-testid=\"hello\"\u003eHello\u003c/div\u003e;\n  }\n}\n```\n\n等效于以下路由配置：\n\n```js\n[{ exact: true, path: \"/hello\", componentName: \"helloController\", componentModule: \"src/client/pages/hello.tsx\" }]``;\n```\n\n\n### path\n\nType: `string`， \n\n路由路径匹配规则，同`react-router` `\u003cRoute\u003e`的`path`参数一致， 例如：\n\n- `/users` 静态路由\n- `/users/:id` 动态路由，路由参数名称`id`\n- `/users/:id/*` 动态全捕获路由，例如匹配 `/user/001/a/b/c`是，得到路由参数 `{id: \"001\", \"*\": \"/a/b/c\"\"}`\n\n### index\n\nType: `boolean | undefined`, Default：`false`\n\n是否是 index 缺省路由。\n\n### caseSensitive\n\nType: `boolean | undefined`, Default：`false`\n\n配置`path`路由规则是否区分字母大小写。\n","htmlContent":"\n                \u003ch1 id=\"react-%E8%B7%AF%E7%94%B1\"\u003e\n                  React 路由\n                \u003c/h1\u003e\u003cp\u003eJoy React 应用是单页面应用(SPA)，单页面应用只在首次加载 HTML 页面框架，而后就由路由模块来切换页面，不同的页面由不同的的组件构成，页面切换也就是切换组件。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e路由模块底层封装自 \u003ca href=\"https://reactrouter.com/\"\u003ereact-router\u003c/a\u003e，请跳转到 \u003ca href=\"https://reactrouter.com/\"\u003ereact router 官网\u003c/a\u003e 了解详细文档。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e@symph/react\u003c/code\u003e 兼容 \u003ca href=\"https://reactrouter.com/\"\u003ereact-router\u003c/a\u003e 的组件和用法，但推荐使用\u003ccode\u003e@symph/react/router-dom\u003c/code\u003e替换\u003ccode\u003ereact-router-dom\u003c/code\u003e，前者包含后者，也方便导入使用，也提供额外的附加能力。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003e@symph/react\u003c/code\u003e提供多种注册路由的方式：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e定义路由组件，注册组件到应用容器，应用自动识别和注册路由。\u003c/li\u003e\n\u003cli\u003e通过\u003ccode\u003eReactRouterService\u003c/code\u003e服务接口，注册路由信息。\u003c/li\u003e\n\u003cli\u003e使用\u003ca href=\"https://reactrouter.com/\"\u003e\u003ccode\u003ereact-router\u003c/code\u003e\u003c/a\u003e的\u003ccode\u003e\u0026lt;Routes\u0026gt;\u003c/code\u003e和\u003ccode\u003e\u0026lt;Route\u0026gt;\u003c/code\u003e注册，注册运行时动态路由，动态路由不在\u003ccode\u003eReactRouterService\u003c/code\u003e服务中注册，所以不能被应用容器控制识别和控制。\u003c/li\u003e\n\u003c/ul\u003e\n\n                \u003ch2 id=\"%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6\"\u003e\n                  路由组件\n                \u003c/h2\u003e\u003cp\u003e使用\u003ccode\u003e@ReactRoute()\u003c/code\u003e装饰器将\u003ccode\u003eReactController\u003c/code\u003e组件类申明为路由组件，将路由组件注册到应用容器，当内置的\u003ccode\u003eReactRouterService\u003c/code\u003e服务识别到路由组件时，将自动解析和注册路由到路由表。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e在 \u003ccode\u003e@symph/joy\u003c/code\u003e 项目启动时，将自动扫描和注册项目中的所有 ReactRoute 路由， 运行\u003ccode\u003ejoy dev\u003c/code\u003e命令，浏览\u003ccode\u003ehttp://localhost:300/hello\u003c/code\u003e 即可访问到我们的页面。\n如果单独使用 \u003ccode\u003e@symph/react\u003c/code\u003e，需要开发者负责注册所有的路由组件。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e例如创建\u003ccode\u003esrc/client/pages/hello.tsx\u003c/code\u003e文件，定义一个路由组件：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-comment\"\u003e// src/client/pages/hello.tsx\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eReactController\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eBaseReactController\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eReactRoute\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@symph/react\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-meta\"\u003e@ReactRoute\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e })\n\u003cspan class=\"hljs-meta\"\u003e@ReactController\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHelloController\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactController\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003erenderView\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edata-testid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eHello\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e等效于以下路由配置：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[{ \u003cspan class=\"hljs-attr\"\u003eexact\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ecomponentName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;helloController\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ecomponentModule\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;src/client/pages/hello.tsx\u0026quot;\u003c/span\u003e }]\u003cspan class=\"hljs-string\"\u003e``\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch3 id=\"path\"\u003e\n                  path\n                \u003c/h3\u003e\u003cp\u003eType: \u003ccode\u003estring\u003c/code\u003e， \u003c/p\u003e\n\u003cp\u003e路由路径匹配规则，同\u003ccode\u003ereact-router\u003c/code\u003e \u003ccode\u003e\u0026lt;Route\u0026gt;\u003c/code\u003e的\u003ccode\u003epath\u003c/code\u003e参数一致， 例如：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/users\u003c/code\u003e 静态路由\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/users/:id\u003c/code\u003e 动态路由，路由参数名称\u003ccode\u003eid\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/users/:id/*\u003c/code\u003e 动态全捕获路由，例如匹配 \u003ccode\u003e/user/001/a/b/c\u003c/code\u003e是，得到路由参数 \u003ccode\u003e{id: \u0026quot;001\u0026quot;, \u0026quot;*\u0026quot;: \u0026quot;/a/b/c\u0026quot;\u0026quot;}\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n                \u003ch3 id=\"index\"\u003e\n                  index\n                \u003c/h3\u003e\u003cp\u003eType: \u003ccode\u003eboolean | undefined\u003c/code\u003e, Default：\u003ccode\u003efalse\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e是否是 index 缺省路由。\u003c/p\u003e\n\n                \u003ch3 id=\"casesensitive\"\u003e\n                  caseSensitive\n                \u003c/h3\u003e\u003cp\u003eType: \u003ccode\u003eboolean | undefined\u003c/code\u003e, Default：\u003ccode\u003efalse\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e配置\u003ccode\u003epath\u003c/code\u003e路由规则是否区分字母大小写。\u003c/p\u003e\n","anchor":[{"type":"heading","raw":"## 路由组件\n\n","depth":2,"text":"路由组件","tokens":[{"type":"text","raw":"路由组件","text":"路由组件"}],"id":"#%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6","children":[{"type":"heading","raw":"### path\n\n","depth":3,"text":"path","tokens":[{"type":"text","raw":"path","text":"path"}],"id":"#path"},{"type":"heading","raw":"### index\n\n","depth":3,"text":"index","tokens":[{"type":"text","raw":"index","text":"index"}],"id":"#index"},{"type":"heading","raw":"### caseSensitive\n\n","depth":3,"text":"caseSensitive","tokens":[{"type":"text","raw":"caseSensitive","text":"caseSensitive"}],"id":"#casesensitive"}]}]},{"title":"ReactController","path":"/react/basic/react-controller","file":"docs/react/02-basic/react-controller.md","hasMenu":false,"mdContent":"# ReactController\n\nReactController 类型的 IoC 组件有点 **特殊**，实例并非 ReactApplicationContext 容器所创建，而是 React 在渲染时，根据界面展示创建实例，然后由容器注入依赖项，界面销毁时，实例也将销毁，其生命周期和 React 类组件一样。\n所以在使用 ReactController 时组要注意：\n\n- 申明的依赖项，只能声明在属性上，不能在构造函数里。\n- 构造函数内不能使用其申明的属性依赖，因为属性依赖还未注入值，可考虑将初始化方法，移动到 `initialize` 方法内。\n\n## 作用：\n\n`ReactController` 负责关联 ReactModel 和 View，其主要职责有：\n\n- 申明依赖的 ReactModel， 绑定 Model 的状态数据到 View，状态发现变化后，自动刷新 View 界面。\n- 响应界面事件，调用 ReactModel 中的业务方法。\n- 展示其包含的 View 组件。\n\n这是一个简单的`ReactController`类：\n\n```tsx\nimport React, { ReactNode } from \"react\";\nimport { BaseReactController, ReactController, ReactRoute } from \"@symph/react\";\n\n@ReactRoute({ path: \"/hello\" })\n@ReactController()\nexport default class HelloController extends BaseReactController {\n  renderView(): ReactNode {\n    return \u003cdiv id=\"msg\"\u003eHello World!\u003c/div\u003e;\n  }\n}\n```\n\n## 依赖 ReactModel\n\n使用依赖注入的方式，我们可以将 ReactModel 的实例注入到 ReactController 中，从而使用其方法和状态，注意：注入的方式只能是属性注入。\n\n### 绑定 Model 状态\n\n在渲染方法`renderView`中使用的状态，将自动和当前界面绑定，当状态发生变化后，界面将重新渲染。\n可以只一个 ReactModel 中的 **部分** 状态， 而其它 **未使用部分** 状态发现更新，界面不会重新渲染，这能明显减少 React 的重新渲染次数。\n在其它地方读取的状态，将不会和界面自动绑定，比如在 React 组件生命周期方法和事件处理方法中。\n\n例如：\n\n```ts\n@ReactModel()\nexport class UserModel extends BaseReactModel\u003c{\n  userName: string;\n  phoneNumber: string;\n}\u003e {\n  // 设置初始化状态\n  getInitState(): OrderModelState {\n    return {};\n  }\n\n  public updateUser({ userName, phoneNumber }) {\n    this.setState({ userName, phoneNumber });\n  }\n}\n```\n\n```tsx\n@ReactController()\nexport default class PhoneController extends BaseReactController {\n  @Inject()\n  private userModel: UserModel;\n\n  updatePhoneNumber = () =\u003e {\n    const { userName, phoneNumber } = this.userModel.state;\n    this.userModel.updateUser({ userName, phoneNumber: \"00000000\" });\n  };\n\n  renderView(): ReactNode {\n    // 只使用了 UserModel 中的 phoneNumber 属性，未使用 userName 属性\n    const { phoneNumber } = this.userModel.state;\n    return (\n      \u003cdiv\u003e\n        \u003cspan\u003ePhone Number: {phoneNumber} \u003c/span\u003e\n        \u003cbutton onClick={this.updatePhoneNumber}\u003eedit\u003c/button\u003e\n      \u003c/div\u003e\n    );\n  }\n}\n```\n\n上示例中:\n\n- 在`PhoneController`的渲染方法中，只使用了`UserModel`状态的`phoneNumber`属性，未使用`name`属性，所以只有当`phoneNumber`状态发现变化时，`PhoneController`才会触发重新渲染。\n- 在 `updatePhone` 中虽然 `userName` 和 `phoneNumber`都使用了，但不是在渲染阶段使用的，所以`userName`并不会和界面建立绑定关系。\n\n### 避免状态过期\n\nReactModel 中对应的状态是不可变的，每次更新状态，都会创建一个新的状态，所以每次获取的状态只能代表当前状态，在需要时应当重新获取新的状态。\n\n例如我们尝试给指定用户发送短信，但是发送之前，需要用户确认手机号是否正确，如果有误，可以改正后发送：\n\n```tsx\n@ReactController()\nexport default class PhoneController extends BaseReactController {\n  @Inject()\n  private userModel: UserModel;\n\n  sendMessage = async () =\u003e {\n    const user = this.userModel.state;\n    await this.confirmPhone(user); // 异步执行语句\n    // 错误: import! 不能直接再使用user.phoneNumber了，因为可能已经被用户修改了。\n    this.userModel.sendSMS({ phoneNumber: user.phoneNumber, smsContext: `Hello ${userName}!` });\n\n    // 正确：应该重新获取当前的状态。\n    const confirmedUser = this.userModel.state;\n    this.userModel.sendSMS({ phoneNumber: confirmedUser.phoneNumber, smsContext: `Hello ${userName}!` });\n  };\n\n  confirmPhone = async () =\u003e {\n    /********\n     * 在这里弹出用户信息确认框。\n     * 如果信息有误，用户可以立即编辑更新用户信息。\n     ******/\n  };\n\n  renderView(): ReactNode {\n    // 只使用了 UserModel 中的 phoneNumber 属性，未使用 userName 属性\n    const { phoneNumber } = this.userModel.state;\n    return (\n      \u003cdiv\u003e\n        \u003cspan\u003ePhone Number: {phoneNumber} \u003c/span\u003e\n        \u003cbutton onClick={this.sendMessage}\u003eSend Hell Message\u003c/button\u003e\n      \u003c/div\u003e\n    );\n  }\n}\n```\n","htmlContent":"\n                \u003ch1 id=\"reactcontroller\"\u003e\n                  ReactController\n                \u003c/h1\u003e\u003cp\u003eReactController 类型的 IoC 组件有点 \u003cstrong\u003e特殊\u003c/strong\u003e，实例并非 ReactApplicationContext 容器所创建，而是 React 在渲染时，根据界面展示创建实例，然后由容器注入依赖项，界面销毁时，实例也将销毁，其生命周期和 React 类组件一样。\n所以在使用 ReactController 时组要注意：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e申明的依赖项，只能声明在属性上，不能在构造函数里。\u003c/li\u003e\n\u003cli\u003e构造函数内不能使用其申明的属性依赖，因为属性依赖还未注入值，可考虑将初始化方法，移动到 \u003ccode\u003einitialize\u003c/code\u003e 方法内。\u003c/li\u003e\n\u003c/ul\u003e\n\n                \u003ch2 id=\"%E4%BD%9C%E7%94%A8%EF%BC%9A\"\u003e\n                  作用：\n                \u003c/h2\u003e\u003cp\u003e\u003ccode\u003eReactController\u003c/code\u003e 负责关联 ReactModel 和 View，其主要职责有：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e申明依赖的 ReactModel， 绑定 Model 的状态数据到 View，状态发现变化后，自动刷新 View 界面。\u003c/li\u003e\n\u003cli\u003e响应界面事件，调用 ReactModel 中的业务方法。\u003c/li\u003e\n\u003cli\u003e展示其包含的 View 组件。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e这是一个简单的\u003ccode\u003eReactController\u003c/code\u003e类：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { \u003cspan class=\"hljs-title class_\"\u003eReactNode\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eBaseReactController\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eReactController\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eReactRoute\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@symph/react\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-meta\"\u003e@ReactRoute\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;/hello\u0026quot;\u003c/span\u003e })\n\u003cspan class=\"hljs-meta\"\u003e@ReactController\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHelloController\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactController\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003erenderView\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eReactNode\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;msg\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eHello World!\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch2 id=\"%E4%BE%9D%E8%B5%96-reactmodel\"\u003e\n                  依赖 ReactModel\n                \u003c/h2\u003e\u003cp\u003e使用依赖注入的方式，我们可以将 ReactModel 的实例注入到 ReactController 中，从而使用其方法和状态，注意：注入的方式只能是属性注入。\u003c/p\u003e\n\n                \u003ch3 id=\"%E7%BB%91%E5%AE%9A-model-%E7%8A%B6%E6%80%81\"\u003e\n                  绑定 Model 状态\n                \u003c/h3\u003e\u003cp\u003e在渲染方法\u003ccode\u003erenderView\u003c/code\u003e中使用的状态，将自动和当前界面绑定，当状态发生变化后，界面将重新渲染。\n可以只一个 ReactModel 中的 \u003cstrong\u003e部分\u003c/strong\u003e 状态， 而其它 \u003cstrong\u003e未使用部分\u003c/strong\u003e 状态发现更新，界面不会重新渲染，这能明显减少 React 的重新渲染次数。\n在其它地方读取的状态，将不会和界面自动绑定，比如在 React 组件生命周期方法和事件处理方法中。\u003c/p\u003e\n\u003cp\u003e例如：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-meta\"\u003e@ReactModel\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserModel\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactModel\u003c/span\u003e\u0026lt;{\n  \u003cspan class=\"hljs-attr\"\u003euserName\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003ephoneNumber\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n}\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 设置初始化状态\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003egetInitState\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eOrderModelState\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {};\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{ userName, phoneNumber }\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetState\u003c/span\u003e({ userName, phoneNumber });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-meta\"\u003e@ReactController\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePhoneController\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactController\u003c/span\u003e {\n  \u003cspan class=\"hljs-meta\"\u003e@Inject\u003c/span\u003e()\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euserModel\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUserModel\u003c/span\u003e;\n\n  updatePhoneNumber = \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { userName, phoneNumber } = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eupdateUser\u003c/span\u003e({ userName, \u003cspan class=\"hljs-attr\"\u003ephoneNumber\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;00000000\u0026quot;\u003c/span\u003e });\n  };\n\n  \u003cspan class=\"hljs-title function_\"\u003erenderView\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eReactNode\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// 只使用了 UserModel 中的 phoneNumber 属性，未使用 userName 属性\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { phoneNumber } = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n      \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003ePhone Number: {phoneNumber} \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{this.updatePhoneNumber}\u003c/span\u003e\u0026gt;\u003c/span\u003eedit\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    );\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上示例中:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e在\u003ccode\u003ePhoneController\u003c/code\u003e的渲染方法中，只使用了\u003ccode\u003eUserModel\u003c/code\u003e状态的\u003ccode\u003ephoneNumber\u003c/code\u003e属性，未使用\u003ccode\u003ename\u003c/code\u003e属性，所以只有当\u003ccode\u003ephoneNumber\u003c/code\u003e状态发现变化时，\u003ccode\u003ePhoneController\u003c/code\u003e才会触发重新渲染。\u003c/li\u003e\n\u003cli\u003e在 \u003ccode\u003eupdatePhone\u003c/code\u003e 中虽然 \u003ccode\u003euserName\u003c/code\u003e 和 \u003ccode\u003ephoneNumber\u003c/code\u003e都使用了，但不是在渲染阶段使用的，所以\u003ccode\u003euserName\u003c/code\u003e并不会和界面建立绑定关系。\u003c/li\u003e\n\u003c/ul\u003e\n\n                \u003ch3 id=\"%E9%81%BF%E5%85%8D%E7%8A%B6%E6%80%81%E8%BF%87%E6%9C%9F\"\u003e\n                  避免状态过期\n                \u003c/h3\u003e\u003cp\u003eReactModel 中对应的状态是不可变的，每次更新状态，都会创建一个新的状态，所以每次获取的状态只能代表当前状态，在需要时应当重新获取新的状态。\u003c/p\u003e\n\u003cp\u003e例如我们尝试给指定用户发送短信，但是发送之前，需要用户确认手机号是否正确，如果有误，可以改正后发送：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-tsx\"\u003e\u003cspan class=\"hljs-meta\"\u003e@ReactController\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePhoneController\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactController\u003c/span\u003e {\n  \u003cspan class=\"hljs-meta\"\u003e@Inject\u003c/span\u003e()\n  \u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euserModel\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUserModel\u003c/span\u003e;\n\n  sendMessage = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e () =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003econfirmPhone\u003c/span\u003e(user); \u003cspan class=\"hljs-comment\"\u003e// 异步执行语句\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// 错误: import! 不能直接再使用user.phoneNumber了，因为可能已经被用户修改了。\u003c/span\u003e\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esendSMS\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ephoneNumber\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003ephoneNumber\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003esmsContext\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`Hello \u003cspan class=\"hljs-subst\"\u003e${userName}\u003c/span\u003e!`\u003c/span\u003e });\n\n    \u003cspan class=\"hljs-comment\"\u003e// 正确：应该重新获取当前的状态。\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e confirmedUser = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esendSMS\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ephoneNumber\u003c/span\u003e: confirmedUser.\u003cspan class=\"hljs-property\"\u003ephoneNumber\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003esmsContext\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`Hello \u003cspan class=\"hljs-subst\"\u003e${userName}\u003c/span\u003e!`\u003c/span\u003e });\n  };\n\n  confirmPhone = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e () =\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e/********\n     * 在这里弹出用户信息确认框。\n     * 如果信息有误，用户可以立即编辑更新用户信息。\n     ******/\u003c/span\u003e\n  };\n\n  \u003cspan class=\"hljs-title function_\"\u003erenderView\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eReactNode\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// 只使用了 UserModel 中的 phoneNumber 属性，未使用 userName 属性\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { phoneNumber } = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserModel\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n      \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003ePhone Number: {phoneNumber} \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{this.sendMessage}\u003c/span\u003e\u0026gt;\u003c/span\u003eSend Hell Message\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    );\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n","anchor":[{"type":"heading","raw":"## 作用：\n\n","depth":2,"text":"作用：","tokens":[{"type":"text","raw":"作用：","text":"作用："}],"id":"#%E4%BD%9C%E7%94%A8%EF%BC%9A"},{"type":"heading","raw":"## 依赖 ReactModel\n\n","depth":2,"text":"依赖 ReactModel","tokens":[{"type":"text","raw":"依赖 ReactModel","text":"依赖 ReactModel"}],"id":"#%E4%BE%9D%E8%B5%96-reactmodel","children":[{"type":"heading","raw":"### 绑定 Model 状态\n\n","depth":3,"text":"绑定 Model 状态","tokens":[{"type":"text","raw":"绑定 Model 状态","text":"绑定 Model 状态"}],"id":"#%E7%BB%91%E5%AE%9A-model-%E7%8A%B6%E6%80%81"},{"type":"heading","raw":"### 避免状态过期\n\n","depth":3,"text":"避免状态过期","tokens":[{"type":"text","raw":"避免状态过期","text":"避免状态过期"}],"id":"#%E9%81%BF%E5%85%8D%E7%8A%B6%E6%80%81%E8%BF%87%E6%9C%9F"}]}]},{"title":"ReactModel","path":"/react/basic/react-model","file":"docs/react/02-basic/react-model.md","hasMenu":false,"mdContent":"# ReactModel\n\nReactModel 组件用于管理业务方法和维护业务数据状态。状态管理基于 [redux](https://redux.js.org/) 实现，秉承其单向不可变数据流，全局状态管理属性的特性。\n\n`ReactModel`是单例且按需加载和创建的，在应用运行期间，只有当前界面上使用到的`ReactModel`组件才会被创建，创建后的实例将一直在容器中存在，如果再次进入该界面，会直接使用之前的实例和其状态渲染。\n\n先看一个简单的购物车 Model 示例：\n\n```ts\nimport { BaseReactModel, ReactModel } from \"@symph/react\";\nimport { Inject } from \"@symph/core\";\n\ninterface Order {\n  id: string;\n  name: string;\n  price: number;\n}\n\ninterface OrderModelState {\n  orders: Order[];\n}\n\n@ReactModel()\nexport class OrderModel extends BaseReactModel\u003cOrderModelState\u003e {\n  // 设置初始化状态\n  getInitState(): OrderModelState {\n    return { orders: [] };\n  }\n\n  async fetchOrders() {\n    const resp = await this.fetchService.fetchApi(\"/orders\");\n    const orders = await resp.json();\n    this.setState({ orders }); // 更新状态\n  }\n}\n```\n\n`OrderModel`继承了`BaseReactModel`类，使用`@ReactModel(options)` 装饰器申明这个是一个 ReactModel，通过泛型指定了其管理的`state`的数据类型。\n\n## 设置初始状态 `getInitState`\n\n在`ReactModel`类中实现`getInitState`方法，其返回值即作为该 Model 的初始状态值。\n\n只有在 `ReactModel` 首次被创建时，才会向统一状态源中注册该 Model 的和其初始状态值。\n\n## 更新状态 `setState`\n\n在业务方法内部，调用父类提供的`protected setState(nextState: Partial\u003cTState\u003e): void`方法来更新当前 Model 状态。\n\n入参`nextState`可以是该 Model 状态的一部分值，最终和当前状态`merge`合并后形成新的状态，合并只是浅层合并，类似`Object.assign({}, nextState, curState)`, 和这和 React 类组件提供的`setState`方法类似。\n\n其访问属性为`protected`，意为着只能在本 Model 内部调用，不能在外部直接调用更改一个 Model 的状态，也不建议这样，这会导致 Model 的状态难以维护。\n\n## 读取状态 `state`\n\n在 Model 内部和外部可通过读取`public get state(): TState；`属性来获取 Model 的当前状态，这是一个`getter`方法申明的只读属性，每次读取该属性，都会重新从统一数据源中获取当前状态值。其实上 Model 实例并未正真保存状态数据，各个 Model 的状态统一在 Redux 的 `store`中管理，读取 Model 状态时，是实时从全局状态中获取属于当前 Model 的状态。\n\n## 避免状态过期\n\nReactModel 中对应的状态是不可变的，每次更新状态，都会创建一个新的状态，所以每次获取的状态只能代表当前状态，在需要时应当重新获取新的状态。\n如赋值语句`const user = userModel.state;`中的`user`只是当前的状态的快照，如果立即更改了`userModel`的状态，`user`变量并不会同步更新。\n\n```ts\nasync function checkState() {\n  let userState = userModel.state;\n  await updateUser(); // 假设在 updateUser 里异步更新了UserModel中的状态。\n  console.log(userState === userModel.state); // 输出： false\n\n  // 建议：在这里重新获取当前状态\n  userState = userModel.state;\n}\n```\n\n## 数据获取服务 ReactFetchService\n\n数据获取基本上是每个前端应用要做的事情，所以`@symph/joy`提供了开箱即用的数据获取服务类`ReactFetchService`, 在`ReactModel`中我们可以直接使用该服务。\n\n```ts\n@ReactModel()\nexport class UserModel extends BaseReactModel\u003c{ user }\u003e {\n  async fetchUser() {\n    // 使用 fetchService 发送请求，获取数据。\n    const resp = await this.fetchService.fetchApi(\"/user/me\");\n    const user = await resp.json();\n    this.setState(User);\n  }\n}\n```\n\n上例中，我们通过`this.fetchService.fetchApi`请求 API 接口数据，那它为我们提供了哪些能力呢？\n\n- 读取配置，生成完成的请求接口地址。\n- 提供请求和响应处理器，错误封装，并发及操时控制等。（待开发）\n- 区分服务端渲染和浏览器环境，两者的实现方式有所不同，所以在服务端渲染时`ReactModel`中注入的是 `ReactFetchServerService` 实例，在浏览器上运行时注入的是 `ReactFetchClientService`实例。\n  例如：在服务端渲染时有时并不能通过外网域名和端口来加载数据，得使用类似`http://localhost:${config.port}`的地址来获取当前服务启动的端口地址。\n\n### fetchApi\n\n`public fetchApi(path: string, init?: RequestInit): Promise\u003cResponse\u003e;`\n\n该方法用于获取 API 数据，添加`apiPrefix`前缀。\n\n我们为了区分请求是为了获取界面还是加载数据，一般会给数据请求的路径上统一添加前缀来区分，默认为`/api`，前缀可在应用配置文件中通过`apiPrefix`定制更改，该方法帮我获取`apiPrefix`配置，拼接完整的 API 请求路径。\n\n例如： 当`apiPrefix: \"/blog-api\"`时，`fetchApi(\"/user/me\")`等效于：`fetch('/blog-api/user/me')`。\n\n### fetchModuleApi\n\n`public fetchModuleApi(moduleMount: string, path: string, init?: RequestInit): Promise\u003cResponse\u003e;`\n\n获取挂载业务模块中提供的接口，`moduleMount`为其挂载点。\n\n\u003e 通常情况下，我们并不直接使用该方法调用第三业务模块中提供的接口，而是依赖第三方模块提供的`ReactModel`或`Service`服务类，调用其方法获取处理后的数据，第三方模块内封装数据请求和数据处理逻辑。\n\n### 可挂载模块获取数据\n\n第三方可挂载业务模块在开发时，并不能预测它挂载到主应用时的名称是什么，所以`@symph/joy`提供了`ReactModuleFetchService`类，其提供`fetchModuleApi`方，在运行时自动获取本模块的挂载值，然后生成完整的请求路径。\n\n例如：当我们开发一个通用的用户管理模块，在其它应用挂载该模块在`users`路径下，那么`reactModuleFetchService.fetchModuleApi(\"/me\")`等效于 `fetch(\"/api/users/me\")`。\n","htmlContent":"\n                \u003ch1 id=\"reactmodel\"\u003e\n                  ReactModel\n                \u003c/h1\u003e\u003cp\u003eReactModel 组件用于管理业务方法和维护业务数据状态。状态管理基于 \u003ca href=\"https://redux.js.org/\"\u003eredux\u003c/a\u003e 实现，秉承其单向不可变数据流，全局状态管理属性的特性。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eReactModel\u003c/code\u003e是单例且按需加载和创建的，在应用运行期间，只有当前界面上使用到的\u003ccode\u003eReactModel\u003c/code\u003e组件才会被创建，创建后的实例将一直在容器中存在，如果再次进入该界面，会直接使用之前的实例和其状态渲染。\u003c/p\u003e\n\u003cp\u003e先看一个简单的购物车 Model 示例：\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eBaseReactModel\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eReactModel\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@symph/react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInject\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@symph/core\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrder\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderModelState\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eorders\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eOrder\u003c/span\u003e[];\n}\n\n\u003cspan class=\"hljs-meta\"\u003e@ReactModel\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderModel\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactModel\u003c/span\u003e\u0026lt;\u003cspan class=\"hljs-title class_\"\u003eOrderModelState\u003c/span\u003e\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 设置初始化状态\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003egetInitState\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eOrderModelState\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003eorders\u003c/span\u003e: [] };\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchOrders\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e resp = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efetchService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efetchApi\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/orders\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e orders = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e resp.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e();\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetState\u003c/span\u003e({ orders }); \u003cspan class=\"hljs-comment\"\u003e// 更新状态\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eOrderModel\u003c/code\u003e继承了\u003ccode\u003eBaseReactModel\u003c/code\u003e类，使用\u003ccode\u003e@ReactModel(options)\u003c/code\u003e 装饰器申明这个是一个 ReactModel，通过泛型指定了其管理的\u003ccode\u003estate\u003c/code\u003e的数据类型。\u003c/p\u003e\n\n                \u003ch2 id=\"%E8%AE%BE%E7%BD%AE%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81-getinitstate\"\u003e\n                  设置初始状态 \u003ccode\u003egetInitState\u003c/code\u003e\n                \u003c/h2\u003e\u003cp\u003e在\u003ccode\u003eReactModel\u003c/code\u003e类中实现\u003ccode\u003egetInitState\u003c/code\u003e方法，其返回值即作为该 Model 的初始状态值。\u003c/p\u003e\n\u003cp\u003e只有在 \u003ccode\u003eReactModel\u003c/code\u003e 首次被创建时，才会向统一状态源中注册该 Model 的和其初始状态值。\u003c/p\u003e\n\n                \u003ch2 id=\"%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81-setstate\"\u003e\n                  更新状态 \u003ccode\u003esetState\u003c/code\u003e\n                \u003c/h2\u003e\u003cp\u003e在业务方法内部，调用父类提供的\u003ccode\u003eprotected setState(nextState: Partial\u0026lt;TState\u0026gt;): void\u003c/code\u003e方法来更新当前 Model 状态。\u003c/p\u003e\n\u003cp\u003e入参\u003ccode\u003enextState\u003c/code\u003e可以是该 Model 状态的一部分值，最终和当前状态\u003ccode\u003emerge\u003c/code\u003e合并后形成新的状态，合并只是浅层合并，类似\u003ccode\u003eObject.assign({}, nextState, curState)\u003c/code\u003e, 和这和 React 类组件提供的\u003ccode\u003esetState\u003c/code\u003e方法类似。\u003c/p\u003e\n\u003cp\u003e其访问属性为\u003ccode\u003eprotected\u003c/code\u003e，意为着只能在本 Model 内部调用，不能在外部直接调用更改一个 Model 的状态，也不建议这样，这会导致 Model 的状态难以维护。\u003c/p\u003e\n\n                \u003ch2 id=\"%E8%AF%BB%E5%8F%96%E7%8A%B6%E6%80%81-state\"\u003e\n                  读取状态 \u003ccode\u003estate\u003c/code\u003e\n                \u003c/h2\u003e\u003cp\u003e在 Model 内部和外部可通过读取\u003ccode\u003epublic get state(): TState；\u003c/code\u003e属性来获取 Model 的当前状态，这是一个\u003ccode\u003egetter\u003c/code\u003e方法申明的只读属性，每次读取该属性，都会重新从统一数据源中获取当前状态值。其实上 Model 实例并未正真保存状态数据，各个 Model 的状态统一在 Redux 的 \u003ccode\u003estore\u003c/code\u003e中管理，读取 Model 状态时，是实时从全局状态中获取属于当前 Model 的状态。\u003c/p\u003e\n\n                \u003ch2 id=\"%E9%81%BF%E5%85%8D%E7%8A%B6%E6%80%81%E8%BF%87%E6%9C%9F\"\u003e\n                  避免状态过期\n                \u003c/h2\u003e\u003cp\u003eReactModel 中对应的状态是不可变的，每次更新状态，都会创建一个新的状态，所以每次获取的状态只能代表当前状态，在需要时应当重新获取新的状态。\n如赋值语句\u003ccode\u003econst user = userModel.state;\u003c/code\u003e中的\u003ccode\u003euser\u003c/code\u003e只是当前的状态的快照，如果立即更改了\u003ccode\u003euserModel\u003c/code\u003e的状态，\u003ccode\u003euser\u003c/code\u003e变量并不会同步更新。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003echeckState\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e userState = userModel.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateUser\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// 假设在 updateUser 里异步更新了UserModel中的状态。\u003c/span\u003e\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(userState === userModel.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 输出： false\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e// 建议：在这里重新获取当前状态\u003c/span\u003e\n  userState = userModel.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\n                \u003ch2 id=\"%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1-reactfetchservice\"\u003e\n                  数据获取服务 ReactFetchService\n                \u003c/h2\u003e\u003cp\u003e数据获取基本上是每个前端应用要做的事情，所以\u003ccode\u003e@symph/joy\u003c/code\u003e提供了开箱即用的数据获取服务类\u003ccode\u003eReactFetchService\u003c/code\u003e, 在\u003ccode\u003eReactModel\u003c/code\u003e中我们可以直接使用该服务。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-meta\"\u003e@ReactModel\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserModel\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseReactModel\u003c/span\u003e\u0026lt;{ user }\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-comment\"\u003e// 使用 fetchService 发送请求，获取数据。\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e resp = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efetchService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efetchApi\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/user/me\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e resp.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e();\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetState\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e上例中，我们通过\u003ccode\u003ethis.fetchService.fetchApi\u003c/code\u003e请求 API 接口数据，那它为我们提供了哪些能力呢？\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e读取配置，生成完成的请求接口地址。\u003c/li\u003e\n\u003cli\u003e提供请求和响应处理器，错误封装，并发及操时控制等。（待开发）\u003c/li\u003e\n\u003cli\u003e区分服务端渲染和浏览器环境，两者的实现方式有所不同，所以在服务端渲染时\u003ccode\u003eReactModel\u003c/code\u003e中注入的是 \u003ccode\u003eReactFetchServerService\u003c/code\u003e 实例，在浏览器上运行时注入的是 \u003ccode\u003eReactFetchClientService\u003c/code\u003e实例。\n例如：在服务端渲染时有时并不能通过外网域名和端口来加载数据，得使用类似\u003ccode\u003ehttp://localhost:${config.port}\u003c/code\u003e的地址来获取当前服务启动的端口地址。\u003c/li\u003e\n\u003c/ul\u003e\n\n                \u003ch3 id=\"fetchapi\"\u003e\n                  fetchApi\n                \u003c/h3\u003e\u003cp\u003e\u003ccode\u003epublic fetchApi(path: string, init?: RequestInit): Promise\u0026lt;Response\u0026gt;;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e该方法用于获取 API 数据，添加\u003ccode\u003eapiPrefix\u003c/code\u003e前缀。\u003c/p\u003e\n\u003cp\u003e我们为了区分请求是为了获取界面还是加载数据，一般会给数据请求的路径上统一添加前缀来区分，默认为\u003ccode\u003e/api\u003c/code\u003e，前缀可在应用配置文件中通过\u003ccode\u003eapiPrefix\u003c/code\u003e定制更改，该方法帮我获取\u003ccode\u003eapiPrefix\u003c/code\u003e配置，拼接完整的 API 请求路径。\u003c/p\u003e\n\u003cp\u003e例如： 当\u003ccode\u003eapiPrefix: \u0026quot;/blog-api\u0026quot;\u003c/code\u003e时，\u003ccode\u003efetchApi(\u0026quot;/user/me\u0026quot;)\u003c/code\u003e等效于：\u003ccode\u003efetch(\u0026#39;/blog-api/user/me\u0026#39;)\u003c/code\u003e。\u003c/p\u003e\n\n                \u003ch3 id=\"fetchmoduleapi\"\u003e\n                  fetchModuleApi\n                \u003c/h3\u003e\u003cp\u003e\u003ccode\u003epublic fetchModuleApi(moduleMount: string, path: string, init?: RequestInit): Promise\u0026lt;Response\u0026gt;;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e获取挂载业务模块中提供的接口，\u003ccode\u003emoduleMount\u003c/code\u003e为其挂载点。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e通常情况下，我们并不直接使用该方法调用第三业务模块中提供的接口，而是依赖第三方模块提供的\u003ccode\u003eReactModel\u003c/code\u003e或\u003ccode\u003eService\u003c/code\u003e服务类，调用其方法获取处理后的数据，第三方模块内封装数据请求和数据处理逻辑。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n                \u003ch3 id=\"%E5%8F%AF%E6%8C%82%E8%BD%BD%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE\"\u003e\n                  可挂载模块获取数据\n                \u003c/h3\u003e\u003cp\u003e第三方可挂载业务模块在开发时，并不能预测它挂载到主应用时的名称是什么，所以\u003ccode\u003e@symph/joy\u003c/code\u003e提供了\u003ccode\u003eReactModuleFetchService\u003c/code\u003e类，其提供\u003ccode\u003efetchModuleApi\u003c/code\u003e方，在运行时自动获取本模块的挂载值，然后生成完整的请求路径。\u003c/p\u003e\n\u003cp\u003e例如：当我们开发一个通用的用户管理模块，在其它应用挂载该模块在\u003ccode\u003eusers\u003c/code\u003e路径下，那么\u003ccode\u003ereactModuleFetchService.fetchModuleApi(\u0026quot;/me\u0026quot;)\u003c/code\u003e等效于 \u003ccode\u003efetch(\u0026quot;/api/users/me\u0026quot;)\u003c/code\u003e。\u003c/p\u003e\n","anchor":[{"type":"heading","raw":"## 设置初始状态 `getInitState`\n\n","depth":2,"text":"设置初始状态 `getInitState`","tokens":[{"type":"text","raw":"设置初始状态 ","text":"设置初始状态 "},{"type":"codespan","raw":"`getInitState`","text":"getInitState"}],"id":"#%E8%AE%BE%E7%BD%AE%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81-%60getinitstate%60"},{"type":"heading","raw":"## 更新状态 `setState`\n\n","depth":2,"text":"更新状态 `setState`","tokens":[{"type":"text","raw":"更新状态 ","text":"更新状态 "},{"type":"codespan","raw":"`setState`","text":"setState"}],"id":"#%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81-%60setstate%60"},{"type":"heading","raw":"## 读取状态 `state`\n\n","depth":2,"text":"读取状态 `state`","tokens":[{"type":"text","raw":"读取状态 ","text":"读取状态 "},{"type":"codespan","raw":"`state`","text":"state"}],"id":"#%E8%AF%BB%E5%8F%96%E7%8A%B6%E6%80%81-%60state%60"},{"type":"heading","raw":"## 避免状态过期\n\n","depth":2,"text":"避免状态过期","tokens":[{"type":"text","raw":"避免状态过期","text":"避免状态过期"}],"id":"#%E9%81%BF%E5%85%8D%E7%8A%B6%E6%80%81%E8%BF%87%E6%9C%9F"},{"type":"heading","raw":"## 数据获取服务 ReactFetchService\n\n","depth":2,"text":"数据获取服务 ReactFetchService","tokens":[{"type":"text","raw":"数据获取服务 ReactFetchService","text":"数据获取服务 ReactFetchService"}],"id":"#%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1-reactfetchservice","children":[{"type":"heading","raw":"### fetchApi\n\n","depth":3,"text":"fetchApi","tokens":[{"type":"text","raw":"fetchApi","text":"fetchApi"}],"id":"#fetchapi"},{"type":"heading","raw":"### fetchModuleApi\n\n","depth":3,"text":"fetchModuleApi","tokens":[{"type":"text","raw":"fetchModuleApi","text":"fetchModuleApi"}],"id":"#fetchmoduleapi"},{"type":"heading","raw":"### 可挂载模块获取数据\n\n","depth":3,"text":"可挂载模块获取数据","tokens":[{"type":"text","raw":"可挂载模块获取数据","text":"可挂载模块获取数据"}],"id":"#%E5%8F%AF%E6%8C%82%E8%BD%BD%E6%A8%A1%E5%9D%97%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"}]}]},{"title":"React 组件简介","path":"/react/basic/react-mvc","file":"docs/react/02-basic/react-mvc.md","hasMenu":false,"mdContent":"# React 组件简介\n\n`@symph/react` 采用 MVC 架构来规范应用各组件的职责，内部状态集中管理和单向数量流动，使 React 专注于界面展示和交互动画，业务逻辑和状态交由 Model 层处理。\n\n## ReactModel\n\n管理业务行为和维护业务数据状态，外界可以通过`state`属性读取当前 Model 的状态，但 **不能** 直接修改状态，改变状态的唯一途径是调用业务方法，在业务方法内调用`setState(nextState)`方法更新状态。\n\n统一状态源，全局状态管理，即为各个 Model 的状态统一在 Redux 的 `store`中管理，同样遵循单向不可变数据流，Model 实例上并未正真保存状态数据，读取状态时，实时从全局状态中获取属于当前 Model 的状态。\n\n## ReactController\n\n负责关联 ReactModel 和 View，绑定 ReactModel 的状态数据到 View，响应用户操作，调用 ReactModel 中的业务操作方法，当状态发现变化后，自动刷新 View 界面。\n\n## View\n\n即 React 组件，使用 Model 中的数据来展示界面，且只负责界面样式展示。\n","htmlContent":"\n                \u003ch1 id=\"react-%E7%BB%84%E4%BB%B6%E7%AE%80%E4%BB%8B\"\u003e\n                  React 组件简介\n                \u003c/h1\u003e\u003cp\u003e\u003ccode\u003e@symph/react\u003c/code\u003e 采用 MVC 架构来规范应用各组件的职责，内部状态集中管理和单向数量流动，使 React 专注于界面展示和交互动画，业务逻辑和状态交由 Model 层处理。\u003c/p\u003e\n\n                \u003ch2 id=\"reactmodel\"\u003e\n                  ReactModel\n                \u003c/h2\u003e\u003cp\u003e管理业务行为和维护业务数据状态，外界可以通过\u003ccode\u003estate\u003c/code\u003e属性读取当前 Model 的状态，但 \u003cstrong\u003e不能\u003c/strong\u003e 直接修改状态，改变状态的唯一途径是调用业务方法，在业务方法内调用\u003ccode\u003esetState(nextState)\u003c/code\u003e方法更新状态。\u003c/p\u003e\n\u003cp\u003e统一状态源，全局状态管理，即为各个 Model 的状态统一在 Redux 的 \u003ccode\u003estore\u003c/code\u003e中管理，同样遵循单向不可变数据流，Model 实例上并未正真保存状态数据，读取状态时，实时从全局状态中获取属于当前 Model 的状态。\u003c/p\u003e\n\n                \u003ch2 id=\"reactcontroller\"\u003e\n                  ReactController\n                \u003c/h2\u003e\u003cp\u003e负责关联 ReactModel 和 View，绑定 ReactModel 的状态数据到 View，响应用户操作，调用 ReactModel 中的业务操作方法，当状态发现变化后，自动刷新 View 界面。\u003c/p\u003e\n\n                \u003ch2 id=\"view\"\u003e\n                  View\n                \u003c/h2\u003e\u003cp\u003e即 React 组件，使用 Model 中的数据来展示界面，且只负责界面样式展示。\u003c/p\u003e\n","anchor":[{"type":"heading","raw":"## ReactModel\n\n","depth":2,"text":"ReactModel","tokens":[{"type":"text","raw":"ReactModel","text":"ReactModel"}],"id":"#reactmodel"},{"type":"heading","raw":"## ReactController\n\n","depth":2,"text":"ReactController","tokens":[{"type":"text","raw":"ReactController","text":"ReactController"}],"id":"#reactcontroller"},{"type":"heading","raw":"## View\n\n","depth":2,"text":"View","tokens":[{"type":"text","raw":"View","text":"View"}],"id":"#view"}]}]},{"title":"高级使用","path":"/react/03-advanced-features","file":"docs/react/03-advanced-features","children":[]}],"defaultOpenKeys":["/react/01-start","/react/02-basic","/react/03-advanced-features"]}},{"type":"reactAppInitManager/__SET_STATE","state":{"/react":{"pathname":"/react","index":false,"initStatic":2}}}]},{"pathname":"/react/03-advanced-features","ssgData":[{"type":"docsModel/__SET_STATE","state":{"loadingCurrentDoc":true}},{"type":"docsModel/__SET_STATE","state":{"loadingCurrentDoc":true}},{"type":"docsModel/__SET_STATE","state":{"loadCurrentDocErr":{"code":500,"message":"服务器错误，请重试。"},"currentDoc":null,"titleTrees":[],"loadingCurrentDoc":false}},{"type":"reactAppInitManager/__SET_STATE","state":{"/react/03-advanced-features":{"pathname":"/react/03-advanced-features","index":false,"initStatic":2}}}]}],"props":{},"page":"/react/03-advanced-features","query":{},"buildId":"sRX-Tp4mKQq49vIenDI6R","joyExport":false,"isFallback":false,"ssr":true,"gip":true}</script><script nomodule="" src="/_joy/static/chunks/polyfills-661efe1e66c152d86266.js"></script><script src="/_joy/static/chunks/main-c52aa145e4e3f5b00c79.js" async=""></script><script src="/_joy/static/chunks/webpack-373fdeea3ec48be3183e.js" async=""></script><script src="/_joy/static/chunks/framework-089ded57a3f0791a1b9d.js" async=""></script><script src="/_joy/static/chunks/commons-ce221d408e33857f830a.js" async=""></script><script src="/_joy/static/chunks/pages/_app-b94e456d88e8b012cf8e.js" async=""></script><script src="/_joy/static/sRX-Tp4mKQq49vIenDI6R/_buildManifest.js" async=""></script><script src="/_joy/static/sRX-Tp4mKQq49vIenDI6R/_ssgManifest.js" async=""></script></body></html>